
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>xarray-dataclasses &#8212; Python  documentation</title>
    
    <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/pydata-sphinx-theme.css" />
    
    <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="xarray_dataclasses package" href="_apidoc/xarray_dataclasses.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="#">
  <img src="_static/logo.svg" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Home
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="_apidoc/xarray_dataclasses.html">
  Package guide
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/astropenguin/xarray-dataclasses/" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/astropengu_in/" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                
<div class="tocsection onthispage pt-5 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#features">
     Features
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#installation">
     Installation
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-usage">
   Basic usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#data-field">
     Data field
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#coordinate-field">
     Coordinate field
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#attribute-field">
     Attribute field
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#name-field">
     Name field
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dataarray-class">
     DataArray class
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dataset-class">
     Dataset class
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advanced-usage">
   Advanced usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#coordof-and-dataof-type-hints">
     Coordof and Dataof type hints
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#general-data-varible-names-in-dataset-creation">
     General data varible names in Dataset creation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#customization-of-dataarray-or-dataset-creation">
     Customization of DataArray or Dataset creation
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dataarray-and-dataset-creation-without-shorthands">
     DataArray and Dataset creation without shorthands
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <section id="xarray-dataclasses">
<h1>xarray-dataclasses<a class="headerlink" href="#xarray-dataclasses" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://pypi.org/project/xarray-dataclasses/"><img alt="PyPI" src="https://img.shields.io/pypi/v/xarray-dataclasses.svg?label=PyPI&amp;style=flat-square" /></a>
<a class="reference external" href="https://pypi.org/project/xarray-dataclasses/"><img alt="Python" src="https://img.shields.io/pypi/pyversions/xarray-dataclasses.svg?label=Python&amp;color=yellow&amp;style=flat-square" /></a>
<a class="reference external" href="https://github.com/astropenguin/xarray-dataclasses/actions"><img alt="Test" src="https://img.shields.io/github/workflow/status/astropenguin/xarray-dataclasses/Tests?logo=github&amp;label=Test&amp;style=flat-square" /></a>
<span class="xref myst"><img alt="License" src="https://img.shields.io/badge/license-MIT-blue.svg?label=License&amp;style=flat-square" /></span>
<a class="reference external" href="https://doi.org/10.5281/zenodo.4624819"><img alt="DOI" src="https://img.shields.io/badge/DOI-10.5281/zenodo.4624819-blue?style=flat-square" /></a></p>
<p>xarray extension for typed DataArray and Dataset creation</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>xarray-dataclasses is a Python package that makes it easy to create <a class="reference external" href="https://xarray.pydata.org/en/stable/index.html">xarray</a>’s DataArray and Dataset objects that are “typed” (i.e. fixed dimensions, data type, coordinates, attributes, and name) using <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">the Python’s dataclass</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>
<span class="kn">from</span> <span class="nn">xarray_dataclasses</span> <span class="kn">import</span> <span class="n">AsDataArray</span><span class="p">,</span> <span class="n">Coord</span><span class="p">,</span> <span class="n">Data</span>


<span class="n">X</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">AsDataArray</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
<section id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Typed DataArray or Dataset objects can easily be created:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p>NumPy-like filled-data creation is also available:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
</li>
<li><p>Support for features by <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">the Python’s dataclass</a> (<code class="docutils literal notranslate"><span class="pre">field</span></code>, <code class="docutils literal notranslate"><span class="pre">__post_init__</span></code>, …).</p></li>
<li><p>Support for static type check by <a class="reference external" href="https://github.com/microsoft/pyright">Pyright</a>.</p></li>
</ul>
</section>
<section id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install xarray-dataclasses
</pre></div>
</div>
</section>
</section>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h2>
<p>xarray-dataclasses uses <a class="reference external" href="https://docs.python.org/3/library/dataclasses.html">the Python’s dataclass</a>.
Data (or data variables), coordinates, attributes, and a name of DataArray or Dataset objects will be defined as dataclass fields by special type hints (<code class="docutils literal notranslate"><span class="pre">Data</span></code>, <code class="docutils literal notranslate"><span class="pre">Coord</span></code>, <code class="docutils literal notranslate"><span class="pre">Attr</span></code>, <code class="docutils literal notranslate"><span class="pre">Name</span></code>), respectively.
Note that the following code is supposed in the examples below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Literal</span>
<span class="kn">from</span> <span class="nn">xarray_dataclasses</span> <span class="kn">import</span> <span class="n">AsDataArray</span><span class="p">,</span> <span class="n">AsDataset</span>
<span class="kn">from</span> <span class="nn">xarray_dataclasses</span> <span class="kn">import</span> <span class="n">Attr</span><span class="p">,</span> <span class="n">Coord</span><span class="p">,</span> <span class="n">Data</span><span class="p">,</span> <span class="n">Name</span>


<span class="n">X</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>
</pre></div>
</div>
<section id="data-field">
<h3>Data field<a class="headerlink" href="#data-field" title="Permalink to this headline">¶</a></h3>
<p>Data field is a field whose value will become the data of a DataArray object or a data variable of a Dataset object.
The type hint <code class="docutils literal notranslate"><span class="pre">Data[TDims,</span> <span class="pre">TDtype]</span></code> fixes the dimensions and the data type of the object.
Here are some examples of how to specify them.</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Type hint</p></th>
<th class="head"><p>Inferred dimensions</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[tuple[()],</span> <span class="pre">...]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">()</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Data[Literal[&quot;x&quot;],</span> <span class="pre">...]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(&quot;x&quot;,)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[tuple[Literal[&quot;x&quot;]],</span> <span class="pre">...]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(&quot;x&quot;,)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Data[tuple[Literal[&quot;x&quot;],</span> <span class="pre">Literal[&quot;y&quot;]],</span> <span class="pre">...]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(&quot;x&quot;,</span> <span class="pre">&quot;y&quot;)</span></code></p></td>
</tr>
</tbody>
</table>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Type hint</p></th>
<th class="head"><p>Inferred data type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">Any]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">None]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">float]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">numpy.dtype(&quot;float64&quot;)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">numpy.float128]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">numpy.dtype(&quot;float128&quot;)</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Data[...,</span> <span class="pre">Literal[&quot;datetime64[ns]&quot;]]</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">numpy.dtype(&quot;&lt;M8[ns]&quot;)</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="coordinate-field">
<h3>Coordinate field<a class="headerlink" href="#coordinate-field" title="Permalink to this headline">¶</a></h3>
<p>Coordinate field is a field whose value will become a coordinate of a DataArray or a Dataset object.
The type hint <code class="docutils literal notranslate"><span class="pre">Coord[TDims,</span> <span class="pre">TDtype]</span></code> fixes the dimensions and the data type of the object.</p>
</section>
<section id="attribute-field">
<h3>Attribute field<a class="headerlink" href="#attribute-field" title="Permalink to this headline">¶</a></h3>
<p>Attribute field is a field whose value will become an attribute of a DataArray or a Dataset object.
The type hint <code class="docutils literal notranslate"><span class="pre">Attr[TAttr]</span></code> specifies the type of the value, which is used only for static type check.</p>
</section>
<section id="name-field">
<h3>Name field<a class="headerlink" href="#name-field" title="Permalink to this headline">¶</a></h3>
<p>Name field is a field whose value will become the name of a DataArray object.
The type hint <code class="docutils literal notranslate"><span class="pre">Name[TName]</span></code> specifies the type of the value, which is used only for static type check.</p>
</section>
<section id="dataarray-class">
<h3>DataArray class<a class="headerlink" href="#dataarray-class" title="Permalink to this headline">¶</a></h3>
<p>DataArray class is a dataclass that defines typed DataArray specifications.
Exactly one data field is allowed in a DataArray class.
The second and subsequent data fields are just ignored in DataArray creation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">AsDataArray</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">units</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;cd / m^2&quot;</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Name</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;luminance&quot;</span>
</pre></div>
</div>
<p>A DataArray object will be created by a class method <code class="docutils literal notranslate"><span class="pre">new()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="n">x</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>

<span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span> <span class="s2">&quot;luminance&quot;</span> <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span><span class="o">&gt;</span>
<span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">2.</span><span class="p">,</span> <span class="mf">3.</span><span class="p">]])</span>
<span class="n">Coordinates</span><span class="p">:</span>
  <span class="o">*</span> <span class="n">x</span>        <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">1</span>
  <span class="o">*</span> <span class="n">y</span>        <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">1</span>
<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">units</span><span class="p">:</span>    <span class="n">cd</span> <span class="o">/</span> <span class="n">m</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
<p>NumPy-like class methods (<code class="docutils literal notranslate"><span class="pre">zeros()</span></code>, <code class="docutils literal notranslate"><span class="pre">ones()</span></code>, …) are also available:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Image</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>

<span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">DataArray</span> <span class="s2">&quot;luminance&quot;</span> <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">3</span><span class="p">)</span><span class="o">&gt;</span>
<span class="n">array</span><span class="p">([[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">],</span>
       <span class="p">[</span><span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">,</span> <span class="mf">1.</span><span class="p">]])</span>
<span class="n">Coordinates</span><span class="p">:</span>
  <span class="o">*</span> <span class="n">x</span>        <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
  <span class="o">*</span> <span class="n">y</span>        <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">units</span><span class="p">:</span>    <span class="n">cd</span> <span class="o">/</span> <span class="n">m</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
</section>
<section id="dataset-class">
<h3>Dataset class<a class="headerlink" href="#dataset-class" title="Permalink to this headline">¶</a></h3>
<p>Dataset class is a dataclass that defines typed Dataset specifications.
Multiple data fields are allowed to define the data variables of the object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ColorImage</span><span class="p">(</span><span class="n">AsDataset</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;2D color image as Dataset.&quot;&quot;&quot;</span>

    <span class="n">red</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">green</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">blue</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">units</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;cd / m^2&quot;</span>
</pre></div>
</div>
<p>A Dataset object will be created by a class method <code class="docutils literal notranslate"><span class="pre">new()</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ColorImage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
    <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>  <span class="c1"># red</span>
    <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>  <span class="c1"># green</span>
    <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>  <span class="c1"># blue</span>
<span class="p">)</span>

<span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="o">&gt;</span>
<span class="n">Dimensions</span><span class="p">:</span>  <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Coordinates</span><span class="p">:</span>
  <span class="o">*</span> <span class="n">x</span>        <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">0</span>
  <span class="o">*</span> <span class="n">y</span>        <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">int64</span> <span class="mi">0</span> <span class="mi">0</span>
<span class="n">Data</span> <span class="n">variables</span><span class="p">:</span>
    <span class="n">red</span>      <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span>
    <span class="n">green</span>    <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">1.0</span>
    <span class="n">blue</span>     <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">2.0</span> <span class="mf">2.0</span> <span class="mf">2.0</span> <span class="mf">2.0</span>
<span class="n">Attributes</span><span class="p">:</span>
    <span class="n">units</span><span class="p">:</span>    <span class="n">cd</span> <span class="o">/</span> <span class="n">m</span><span class="o">^</span><span class="mi">2</span>
</pre></div>
</div>
</section>
</section>
<section id="advanced-usage">
<h2>Advanced usage<a class="headerlink" href="#advanced-usage" title="Permalink to this headline">¶</a></h2>
<section id="coordof-and-dataof-type-hints">
<h3>Coordof and Dataof type hints<a class="headerlink" href="#coordof-and-dataof-type-hints" title="Permalink to this headline">¶</a></h3>
<p>xarray-dataclasses provides advanced type hints, <code class="docutils literal notranslate"><span class="pre">Coordof</span></code> and <code class="docutils literal notranslate"><span class="pre">Dataof</span></code>.
Unlike <code class="docutils literal notranslate"><span class="pre">Data</span></code> and <code class="docutils literal notranslate"><span class="pre">Coord</span></code>, they specify a dataclass that defines a DataArray class.
This is useful when users want to add metadata to dimensions for <a class="reference external" href="https://xarray.pydata.org/en/stable/user-guide/plotting.html#simple-example">plotting</a>.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xarray_dataclasses</span> <span class="kn">import</span> <span class="n">Coordof</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">XAxis</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="n">long_name</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;x axis&quot;</span>
    <span class="n">units</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pixel&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">YAxis</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
    <span class="n">long_name</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;y axis&quot;</span>
    <span class="n">units</span><span class="p">:</span> <span class="n">Attr</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;pixel&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">AsDataArray</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coordof</span><span class="p">[</span><span class="n">XAxis</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coordof</span><span class="p">[</span><span class="n">YAxis</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
</pre></div>
</div>
</section>
<section id="general-data-varible-names-in-dataset-creation">
<h3>General data varible names in Dataset creation<a class="headerlink" href="#general-data-varible-names-in-dataset-creation" title="Permalink to this headline">¶</a></h3>
<p>Due to the limitation of Python’s parameter names, it is not possible to define data variable names that contain white spaces, for example.
In such cases, please define DataArray classes of each data variable so that they have name fields and specify them by <code class="docutils literal notranslate"><span class="pre">Dataof</span></code> in a Dataset class.
Then the values of the name fields will be used as data variable names.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Red</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Name</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Red image&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Green</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Name</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Green image&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Blue</span><span class="p">:</span>
    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Name</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Blue image&quot;</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ColorImage</span><span class="p">(</span><span class="n">AsDataset</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;2D color image as Dataset.&quot;&quot;&quot;</span>

    <span class="n">red</span><span class="p">:</span> <span class="n">Dataof</span><span class="p">[</span><span class="n">Red</span><span class="p">]</span>
    <span class="n">green</span><span class="p">:</span> <span class="n">Dataof</span><span class="p">[</span><span class="n">Green</span><span class="p">]</span>
    <span class="n">blue</span><span class="p">:</span> <span class="n">Dataof</span><span class="p">[</span><span class="n">Blue</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ColorImage</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
    <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>
    <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
    <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span>
<span class="p">)</span>

<span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="o">&gt;</span>
<span class="n">Dimensions</span><span class="p">:</span>      <span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">:</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">Dimensions</span> <span class="n">without</span> <span class="n">coordinates</span><span class="p">:</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="n">Data</span> <span class="n">variables</span><span class="p">:</span>
    <span class="n">Red</span> <span class="n">image</span>    <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span> <span class="mf">0.0</span>
    <span class="n">Green</span> <span class="n">image</span>  <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">1.0</span> <span class="mf">1.0</span>
    <span class="n">Blue</span> <span class="n">image</span>   <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="n">float64</span> <span class="mf">2.0</span> <span class="mf">2.0</span> <span class="mf">2.0</span> <span class="mf">2.0</span>
</pre></div>
</div>
</section>
<section id="customization-of-dataarray-or-dataset-creation">
<h3>Customization of DataArray or Dataset creation<a class="headerlink" href="#customization-of-dataarray-or-dataset-creation" title="Permalink to this headline">¶</a></h3>
<p>For customization, users can add a special class attribute, <code class="docutils literal notranslate"><span class="pre">__dataoptions__</span></code>, to a DataArray or Dataset class.
A custom factory for DataArray or Dataset creation is only supported in the current implementation.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">from</span> <span class="nn">xarray_dataclasses</span> <span class="kn">import</span> <span class="n">DataOptions</span>


<span class="k">class</span> <span class="nc">Custom</span><span class="p">(</span><span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Custom DataArray.&quot;&quot;&quot;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">()</span>

    <span class="k">def</span> <span class="nf">custom_method</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Custom method.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">True</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Image</span><span class="p">(</span><span class="n">AsDataArray</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="n">__dataoptions__</span> <span class="o">=</span> <span class="n">DataOptions</span><span class="p">(</span><span class="n">Custom</span><span class="p">)</span>


<span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">ones</span><span class="p">([</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">Custom</span><span class="p">)</span>  <span class="c1"># True</span>
<span class="n">image</span><span class="o">.</span><span class="n">custom_method</span><span class="p">()</span>  <span class="c1"># True</span>
</pre></div>
</div>
</section>
<section id="dataarray-and-dataset-creation-without-shorthands">
<h3>DataArray and Dataset creation without shorthands<a class="headerlink" href="#dataarray-and-dataset-creation-without-shorthands" title="Permalink to this headline">¶</a></h3>
<p>xarray-dataclasses provides functions, <code class="docutils literal notranslate"><span class="pre">asdataarray</span></code> and <code class="docutils literal notranslate"><span class="pre">asdataset</span></code>.
This is useful when users do not want to inherit the mix-in class (<code class="docutils literal notranslate"><span class="pre">AsDataArray</span></code> or <code class="docutils literal notranslate"><span class="pre">AsDataset</span></code>) in a DataArray or Dataset dataclass.
For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">xarray_dataclasses</span> <span class="kn">import</span> <span class="n">asdataarray</span>


<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">Image</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;2D image as DataArray.&quot;&quot;&quot;</span>

    <span class="n">data</span><span class="p">:</span> <span class="n">Data</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">X</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Coord</span><span class="p">[</span><span class="n">Y</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>


<span class="n">image</span> <span class="o">=</span> <span class="n">asdataarray</span><span class="p">(</span><span class="n">Image</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
<!-- References -->
<div class="toctree-wrapper compound">
</div>
</section>
</section>
</section>


              </div>
              
              
              <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='right-next' id="next-link" href="_apidoc/xarray_dataclasses.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">xarray_dataclasses package</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
              
          </main>
          

      </div>
    </div>
  
    <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2020-2022 Akio Taniguchi.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>